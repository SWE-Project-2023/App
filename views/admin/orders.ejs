<%-include("./admin-partials/header.ejs", { title: "Orders" })%>

<!-- Sample Orders -->
<% orders = [
    {
        "id": 1,
        "quantity": 5,
        "date": "2023-10-25",
        "status": "Shipped",
        "items": [
            {"id": 1, "title": "Brufen Cold", "quantity": 2, "price": 53},
            {"id": 2, "title": "Amoxicillin", "quantity": 3, "price": 12}
        ],
        "sum": (2 * 53 + 3 * 12)
    },
    {
        "id": 2,
        "quantity": 3,
        "date": "2023-10-24",
        "status": "Delivered",
        "items": [
            {"id": 3, "title": "Lipitor", "quantity": 1, "price": 65},
            {"id": 4, "title": "Ventolin Inhaler", "quantity": 2, "price": 30}
        ],
        "sum": (1 * 65 + 2 * 30)
    },
    {
        "id": 3,
        "quantity": 6,
        "date": "2023-10-23",
        "status": "Processing",
        "items": [
            {"id": 5, "title": "Zyrtec", "quantity": 4, "price": 18},
            {"id": 6, "title": "Nexium", "quantity": 2, "price": 40}
        ],
        "sum": (4 * 18 + 2 * 40)
    },
    {
        "id": 4,
        "quantity": 2,
        "date": "2023-10-22",
        "status": "Shipped",
        "items": [
            {"id": 7, "title": "Advil", "quantity": 2, "price": 10}
        ],
        "sum": (2 * 10)
    },
    {
        "id": 5,
        "quantity": 4,
        "date": "2023-10-21",
        "status": "Delivered",
        "items": [
            {"id": 8, "title": "Synthroid", "quantity": 1, "price": 22},
            {"id": 9, "title": "Metformin", "quantity": 3, "price": 15}
        ],
        "sum": (1 * 22 + 3 * 15)
    },
    {
        "id": 6,
        "quantity": 1,
        "date": "2023-10-20",
        "status": "Processing",
        "items": [
            {"id": 10, "title": "Prozac", "quantity": 1, "price": 35}
        ],
        "sum": (1 * 35)
    },
    {
        "id": 7,
        "quantity": 3,
        "date": "2023-10-19",
        "status": "Shipped",
        "items": [
            {"id": 1, "title": "Brufen Cold", "quantity": 2, "price": 53},
            {"id": 5, "title": "Zyrtec", "quantity": 1, "price": 18}
        ],
        "sum": (2 * 53 + 1 * 18)
    },
    {
        "id": 8,
        "quantity": 2,
        "date": "2023-10-18",
        "status": "Delivered",
        "items": [
            {"id": 2, "title": "Amoxicillin", "quantity": 1, "price": 12},
            {"id": 4, "title": "Ventolin Inhaler", "quantity": 1, "price": 30}
        ],
        "sum": (1 * 12 + 1 * 30)
    },
    {
        "id": 9,
        "quantity": 4,
        "date": "2023-10-17",
        "status": "Processing",
        "items": [
            {"id": 6, "title": "Nexium", "quantity": 2, "price": 40},
            {"id": 8, "title": "Synthroid", "quantity": 2, "price": 22}
        ],
        "sum": (2 * 40 + 2 * 22)
    },
    {
        "id": 10,
        "quantity": 1,
        "date": "2023-10-16",
        "status": "Shipped",
        "items": [
            {"id": 3, "title": "Lipitor", "quantity": 1, "price": 65}
        ],
        "sum": (1 * 65)
    }
]
%>

<div class="container">
  <div class="row">
    <h1>Orders</h1>
  </div>
  <div class="table-responsive" style="max-height: 75vh; max-width: 75vw">
    <table class="table table-bordered">
      <thead class="sticky-top">
        <tr>
            <th>ID</th>
            <th>Quantity</th>
            <th>Date</th>
            <th>Status</th>
            <th>Items</th>
            <th>Sum</th>
            <th></th>
        </tr>
      </thead>
      <tbody>
        <% orders.forEach(order => { %>
        <tr>
            <td><%= order.id %></td>
            <td><%= order.quantity %></td>
            <td><%= order.date %></td>
            <td>
                <span class="badge bg-<%= order.status === "Shipped" ? "success" : order.status === "Delivered" ? "primary" : "warning" %>">
                    <%= order.status %>
                </span>
            </td>
            <td>
                <ul>
                <% order.items.forEach(item => { %>
                <li><%= item.title %> x <%= item.quantity %></li>
                <% }) %>
                </ul>
            </td>
            <td><%= order.sum.toFixed(2) %></td>
            <td>
                <a href="#" class="btn btn-outline-secondary btn-sm">Change Status</a>
                <a href="#" class="btn btn-outline-danger btn-sm">Delete</a>
            </td>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<%-include("./admin-partials/footer.ejs")%>
